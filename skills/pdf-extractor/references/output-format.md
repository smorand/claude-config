# Output Format

Complete guide to the output structure and file formats generated by the PDF extractor.

## Output Directory Structure

Every PDF extraction creates a dedicated folder named after the PDF file.

### Basic Structure

```
pdf_name/
├── document.md       # Extracted text content with image references
├── images.md         # AI-generated image catalog with descriptions
└── image-*.png       # Extracted images (numbered sequentially)
```

### Example

For a PDF named `quarterly_report.pdf`:

```
quarterly_report/
├── document.md
├── images.md
├── image-0-0.png
├── image-1-0.png
├── image-2-0.png
├── image-3-0.png
└── image-4-0.png
```

## File Formats

### document.md

**Purpose:** Main text content extracted from PDF in Markdown format

**Format:** Standard Markdown with image references

**Features:**
- Layout preservation (headers, lists, paragraphs)
- Embedded image references
- Page structure maintained
- Tables converted to Markdown tables (when possible)

**Example Content:**

```markdown
# Quarterly Report Q4 2024

## Executive Summary

The fourth quarter showed strong performance across all divisions...

![image](image-0-0.png)

## Financial Overview

Revenue increased by 15% compared to Q3...

### Key Metrics

- Revenue: $4.2M
- Profit: $1.8M
- Growth: 15%

![image](image-1-0.png)

## Market Analysis

The market landscape continues to evolve...

![image](image-2-0.png)
```

### images.md

**Purpose:** AI-generated catalog of all images with detailed analysis

**Format:** Structured Markdown with consistent sections per image

**Sections per Image:**
1. Image header with filename
2. Path (relative)
3. Type classification
4. Text presence indicator
5. AI-generated description
6. Preview (embedded image)

**Complete Example:**

```markdown
# Image Catalog

Total images extracted: 3

---

## Image 1: image-0-0.png

**Path:** `image-0-0.png`

**Type:** chart

**Contains Text:** Yes

**Description:**

This is a vertical bar chart showing quarterly revenue figures for 2024. The chart displays four bars representing Q1 through Q4, with values ranging from $3.2M to $4.2M. Each bar is color-coded in blue and includes exact revenue values at the top. The y-axis shows revenue in millions of dollars, clearly labeled from $0 to $5M.

**Preview:**

![image-0-0.png](image-0-0.png)

---

## Image 2: image-1-0.png

**Path:** `image-1-0.png`

**Type:** table

**Contains Text:** Yes

**Description:**

A detailed financial table showing monthly breakdown of revenue, costs, and profit for Q4 2024. The table has three columns (October, November, December) and multiple rows for different expense categories. All values are displayed in USD with two decimal precision. The table includes subtotals and a grand total row at the bottom.

**Preview:**

![image-1-0.png](image-1-0.png)

---

## Image 3: image-2-0.png

**Path:** `image-2-0.png`

**Type:** diagram

**Contains Text:** Yes

**Description:**

A flowchart diagram illustrating the company's sales process from lead generation to customer onboarding. The diagram uses rectangular boxes for process steps and diamond shapes for decision points, connected by arrows showing the workflow direction. It includes seven main steps with two decision branches for qualified and unqualified leads.

**Preview:**

![image-2-0.png](image-2-0.png)

---
```

### Image Files (image-*.png)

**Naming Convention:** `image-{page}-{index}.png`
- `page`: PDF page number (0-indexed)
- `index`: Image index on that page (0-indexed)

**Examples:**
- `image-0-0.png` - First image on first page
- `image-0-1.png` - Second image on first page
- `image-1-0.png` - First image on second page

**Format:** PNG (Portable Network Graphics)

**Properties:**
- **DPI:** 150 (default)
- **Color:** Full color (RGB)
- **Transparency:** Preserved from original
- **Compression:** PNG lossless compression

## Image Classification

### Image Types

The AI classifier detects these image types:

#### 1. **photo**
Photographs and realistic images
- Product photos
- People portraits
- Real-world scenes
- Photography

#### 2. **diagram**
Technical diagrams and flowcharts
- Flowcharts
- Architecture diagrams
- Process flows
- System diagrams
- Network diagrams
- UML diagrams

#### 3. **chart**
Data visualizations (charts and graphs)
- Bar charts
- Line graphs
- Pie charts
- Area charts
- Scatter plots
- Combination charts

#### 4. **graph**
Similar to chart, for statistical graphs
- Statistical graphs
- Data plots
- Time series
- Distribution graphs

#### 5. **table**
Tabular data presented as images
- Financial tables
- Data grids
- Comparison tables
- Spreadsheet captures

#### 6. **screenshot**
Screen captures
- Application screenshots
- Website captures
- UI mockups
- Software interfaces

#### 7. **banner**
Page headers and decorative banners
- Page headers
- Section dividers
- Title banners
- Decorative headers

#### 8. **logo**
Company logos and branding
- Company logos
- Brand marks
- Icons used as logos
- Corporate identity

#### 9. **icon**
Small symbolic images
- UI icons
- Symbolic representations
- Small graphics
- Indicators

#### 10. **illustration**
Drawings and artistic content
- Hand-drawn illustrations
- Artistic representations
- Concept art
- Infographics

#### 11. **map**
Geographic or conceptual maps
- Geographic maps
- Location maps
- Conceptual maps
- Mind maps

#### 12. **other**
Unclassified or mixed-type images
- Unknown image types
- Mixed content
- Unclear classification

### Text Detection

**Purpose:** Identify images with significant readable text

**Values:**
- `Yes` - Image contains readable text
- `No` - Image has no significant text

**Use Cases:**
- Identify OCR candidates
- Filter images for text extraction
- Detect tables with text data
- Find screenshots with UI text

## Image Description Format

### Description Guidelines

AI-generated descriptions follow these principles:

**Length:** 2-3 sentences (concise but informative)

**Content:**
1. **First sentence:** What the image shows (main subject)
2. **Second sentence:** Key details (data, labels, structure)
3. **Third sentence (optional):** Additional context or insights

**Example:**

```markdown
This is a horizontal bar chart comparing market share across five competitors.
The chart shows Company A leading with 35%, followed by Company B at 25%, with
three smaller competitors sharing the remaining 40%. Each bar is labeled with
the exact percentage and company name, and uses a distinct color for easy
identification.
```

### Context-Aware Analysis

The AI analyzer considers:
- **Surrounding text** from document.md
- **Image position** in the document
- **Document type** inferred from content
- **Visual elements** detected in image

This provides more accurate and relevant descriptions.

## File Organization Patterns

### Default Path Pattern

When no output directory specified:

```
/path/to/source/
├── report.pdf          # Original PDF
└── report/             # Extracted content
    ├── document.md
    ├── images.md
    └── image-*.png
```

**Benefit:** Files organized alongside source PDF

### Custom Path Pattern

When output directory specified:

```
/custom/output/
├── report/             # PDF name folder
│   ├── document.md
│   ├── images.md
│   └── image-*.png
├── presentation/       # Another PDF
│   ├── document.md
│   ├── images.md
│   └── image-*.png
└── analysis/           # Another PDF
    ├── document.md
    ├── images.md
    └── image-*.png
```

**Benefit:** All extractions centralized in one location

## Content Structure Examples

### Simple PDF (Few Images)

```
simple_doc/
├── document.md         # 500 lines
├── images.md           # 2 images analyzed
├── image-0-0.png       # 150KB
└── image-2-0.png       # 200KB
```

### Complex PDF (Many Images)

```
complex_report/
├── document.md         # 5000 lines
├── images.md           # 25 images analyzed
├── image-0-0.png       # Logo
├── image-0-1.png       # Banner
├── image-1-0.png       # Chart
├── image-2-0.png       # Diagram
├── image-2-1.png       # Table
├── image-3-0.png       # Photo
├── ...                 # More images
└── image-15-2.png      # Last image
```

### Presentation PDF (Many Pages)

```
presentation/
├── document.md         # 2000 lines
├── images.md           # 50 images analyzed
├── image-0-0.png       # Title slide
├── image-1-0.png       # Slide 2
├── image-2-0.png       # Slide 3
├── ...                 # One image per slide
└── image-49-0.png      # Last slide
```

## Filtering and Searching

### Find Specific Image Types

```bash
# Find all charts
grep -B 2 "**Type:** chart" images.md

# Find all diagrams
grep -B 2 "**Type:** diagram" images.md

# Exclude banners and logos
grep -v "banner\|logo" images.md
```

### Find Images with Text

```bash
# Find images containing text
grep -B 5 "**Contains Text:** Yes" images.md

# Find images without text
grep -B 5 "**Contains Text:** No" images.md
```

### Search Descriptions

```bash
# Search for specific terms in descriptions
grep -A 10 "revenue" images.md
grep -A 10 "flowchart" images.md
grep -A 10 "comparison" images.md
```

### Count Image Types

```bash
# Count occurrences of each type
grep "**Type:**" images.md | sort | uniq -c

# Example output:
#   3 **Type:** banner
#   8 **Type:** chart
#   5 **Type:** diagram
#   2 **Type:** logo
#   4 **Type:** table
```

## Typical File Sizes

### document.md
- **Small PDF (5 pages):** 10-50 KB
- **Medium PDF (20 pages):** 50-200 KB
- **Large PDF (100 pages):** 200 KB - 2 MB

### images.md
- **Per image entry:** ~500-800 bytes
- **10 images:** ~5-8 KB
- **50 images:** ~25-40 KB
- **100 images:** ~50-80 KB

### Image Files (image-*.png)
- **Simple diagram:** 50-200 KB
- **Chart/graph:** 100-300 KB
- **Photo:** 200 KB - 1 MB
- **Screenshot:** 200-500 KB
- **Logo/icon:** 20-100 KB

### Total Extraction Size

**Small PDF:**
- Document: 30 KB
- Images catalog: 5 KB
- 5 images: 500 KB
- **Total:** ~535 KB

**Medium PDF:**
- Document: 150 KB
- Images catalog: 20 KB
- 20 images: 3 MB
- **Total:** ~3.2 MB

**Large PDF:**
- Document: 1 MB
- Images catalog: 50 KB
- 50 images: 10 MB
- **Total:** ~11 MB

## Reading and Processing Output

### Read All Content

```bash
# Read main document
cat pdf_name/document.md

# Read image catalog
cat pdf_name/images.md

# List all images
ls -lh pdf_name/*.png
```

### Extract Specific Sections

```bash
# Get only headings from document
grep "^#" pdf_name/document.md

# Get image descriptions only
grep -A 3 "**Description:**" pdf_name/images.md

# Get image paths
grep "**Path:**" pdf_name/images.md
```

### Combined Analysis

```bash
# Read document and find referenced images
cat pdf_name/document.md | grep -o 'image-[0-9]*-[0-9]*.png' | while read img; do
    echo "=== $img ==="
    grep -A 10 "$img" pdf_name/images.md
done
```

## Integration with Other Tools

### Convert to Other Formats

```bash
# Convert document.md to HTML
pandoc pdf_name/document.md -o output.html

# Convert to DOCX
pandoc pdf_name/document.md -o output.docx

# Convert to PDF
pandoc pdf_name/document.md -o output.pdf
```

### Extract Data

```bash
# Extract all image descriptions to text file
grep -A 3 "**Description:**" pdf_name/images.md > descriptions.txt

# Create CSV of image metadata
echo "Filename,Type,Has_Text" > images.csv
grep -E "Path:|Type:|Contains Text:" pdf_name/images.md | \
    paste - - - | sed 's/\*\*Path:\*\* `\(.*\)`.*\*\*Type:\*\* \(.*\).*\*\*Contains Text:\*\* \(.*\)/\1,\2,\3/' >> images.csv
```

### Combine Multiple Extractions

```bash
# Combine all document.md files
cat */document.md > combined_documents.md

# Combine all image catalogs
cat */images.md > combined_images.md
```
